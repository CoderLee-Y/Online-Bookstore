# Homework 7

1. 请你详细描述如何通过全量备份和增量备份来实现系统状态恢复。(2分）

   1. 每隔一段时间做全量备份，间隔不宜太短，因为在全量备份需要读锁，会影响数据库的性能。然后每次做完全量备份之后，都要删除本次全量备份和上次全量备份之间的增量备份；
   2. 在两次全量备份之间需要做增量备份，然后每隔一段时间就要新建一个bin log，保证每个备份文件的大小不是特别大；应该注意，两种备份文件不应和Mysql数据本身在同一个文件系统和磁盘中；
   4. 在恢复的时候，需要先将最靠近的全量备份恢复，然后按照时间顺序恢复该全量备份之后的增量备份，直到最后一个因为crash被截断的增量备份。
   4. 对于书店而言，会在夜间做全量备份，并且经常性的做增量备份。由于增量主要由订单组成，而全量备份则包含了大量的书籍信息，图片等，所以全量备份的间隔不会太短。个人认为可以在一周或者数周做一次全量备份，或者在商品大变动之后及时全量备份。

2. 请你根据MySQL缓存的工作原理，描述预取机制的优点。(1分)

   1. 进行数据访问，Mysql会先在缓存中寻找，当缓存数据Miss后才去硬盘上查找;
   2. 在硬盘上查找时主要时间用于磁盘寻道，如读取一些数据多花费的时间比起寻道时间是小量；
   3. 由于Optimize等操作的存在，磁盘上的相邻数据往往跟现在数据处于表中的相近位置；（比如相近ID的书）
   4. 根据局部性原理，下次访问的数据有可能就在本次访问数据的附近；（比如加载相邻的书籍页面）
   5. 下次访问数据的时候Hit的可能性增大，鉴于内存和硬盘访问的速度差别很大，能提高数据库性能。

3. 请你按照你的理解，阐述Partition机制有什么好处？如果数据文件在一台机器上有足够的存储空间存储，是否还需要进行Partition？(2分)

   1. Partition可以处理单个文件到达文件系统上限，到达磁盘上限的情况
   2. Partition可以提高某些特定分区的查询速度，比如如果Book按照类别分区，那么用户点击特定类别查看所有书籍以及各种按类别查找订单等功能将被加速，我们只需要去特定分区查找即可
   3. Partitiuon可以便于对某个类别做集体的操作。比如过了某一天，我希望能把某个时段内的订单全部自动确认收货方便给商家打钱，那我可以把订单按照日期做一个分区，只需要对某个分区的所有订单`update received = true;`就可以了。
   4. 因此，哪怕一张表其实存的下，也有必要做Partition，可以节约某些经常进行的查询和集体操作的速度。
   
   

